{% extends "./main.html" %}
{%load static%}
{%block content%}

<div class="container">
	<div class="col-md-3 product-bottom">
				<script>
					// Отримання елементу форми
					var form = document.getElementById("myForm");
					
					// Функція для обробки подання форми
					function handleSubmit(event) {
						event.preventDefault(); // Запобігаємо типовому поданню форми
						
						// Конвертуємо дані форми в об'єкт FormData
						var formData = new FormData(form);
						
						// Відсилаємо дані форми на сервер за допомогою fetch API
						fetch("markizkit3@gmail.com", {
							method: "POST",
							body: formData
						})
						.then(response => {
							// Обробка відповіді від сервера
							console.log("Дані форми успішно відправлені!");
						})
						.catch(error => {
							// Обробка помилок
							console.error("Помилка відправлення даних форми:", error);
						});
					}
					
					// Додавання слухача подання форми
					form.addEventListener("submit", handleSubmit);
				</script>
				</div>
				</div>
				<div class="card-body">
					<ul class="list-group list-group-flush">
						
						<li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">

							<div class="form-outline mb-4">
								<label class="form-label" for="formPrice">Price</label>
								<input type="text" id="formPrice" class="form-control" name="price" value="{{ order.get_cart_total }}" readonly>
							</div>	
						</li>
					</ul>

					<script src="https://checkout.stripe.com/checkout.js"	class='stripe-button form-outline mb-4'
					data-key="{{key}}"
					data-description="Pay"
					data-amount="{{ total }}"
					data-locale="auto">
</script>
</form>
</div>
</div>
</div>
</div>

{%endblock content%}
